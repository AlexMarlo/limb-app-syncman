<html>
<head>
  <title>Limb Tests</title>
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />

  <script src="../scriptaculous/lib/prototype.js" type="text/javascript"></script>
  <script src="../scriptaculous/src/unittest.js" type="text/javascript"></script>
  <link rel="stylesheet" href="../test.css" type="text/css" />

  <script src="../../Limb.js" type="text/javascript"></script>
</head>
<body>
<h1>Limb package management</h1>
<p>
  Tests for Limb.Packages.SourceCompiler.
</p>

<div id="testlog"></div>
<div id="result"></div>

<script type="text/javascript" language="javascript" charset="utf-8">
// <![CDATA[
  new Test.Unit.Runner({
    testExtract: function()
    {
      code = 'Foo = {}; Foo.bar = 1;';
      Limb.Packages.Compiller.extract(code, ['Foo']);

      this.assertNotNull(Foo);
      this.assertEqual(1, Foo.bar);
      Foo = undefined;
    },

    testExtractSeveral: function()
    {
      code = 'Foo = {}; Foo.bar = 1; Zoo = {}; Zoo.wow = 2';
      Limb.Packages.Compiller.extract(code, ['Foo', 'Zoo']);

      this.assertNotNull(Foo);
      this.assertEqual(1, Foo.bar);
      this.assertNotNull(Zoo);
      this.assertEqual(2, Zoo.wow);
      Foo = undefined;
      Zoo = undefined;
    },

    testExtractNested: function()
    {
      code = 'Foo = {}; Foo.Bar = {};';
      Limb.Packages.Compiller.extract(code, ['Foo.Bar']);

      this.assertNotNull(Foo);
      this.assertNotNull(Foo.Bar);
      Foo = undefined;
    },

    testLoadGlobals: function()
    {
      var code = 'Foo = {}; Bar = {};';
      Limb.Packages.Compiller.extract(code, ['Foo']);

      this.assertNotNull(Foo);
      this.assertNotNull(Bar);
    }
  });
// ]]>
</script>
</body>
</html>